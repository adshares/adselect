configuration:
  title: AdSelect
  description: Api documentation for AdSelect
  uri: https://adselect.example.com:8000
versions:
  v0.1:
    status: current
    major: 0
    minor: 1
    methods:
      campaign_update:
        label: campaign_update
        method: POST
        uri: /
        description: Update AdSelect DB with campaign and banner information.
        request_body:
          type: object
          properties:
            jsonrpc:
              type: const
              description: Json-RPC version
              const_type: string
              value: "2.0"
            method:
              type: const
              description: Json-RPC method name
              const_type: string
              value: "campaign_update"
            id:
              type: integer
            params:
              type: array
              items:
                  type: reference
                  reference: CampaignObject
        response_body:
            type: object
            properties:
              jsonrpc:
                type: const
                description: Json-RPC version
                const_type: string
                value: "2.0"
              id:
                type: integer
              result:
                type: const
                const_type: string
                value: "True"
        response_codes:
          - code: 200
            description: All OK.
      campaign_delete:
        label: campaign_delete
        method: POST
        uri: /
        description: Update AdSelect DB with campaign and banner information.
        request_body:
          type: object
          properties:
            jsonrpc:
              type: const
              description: Json-RPC version
              const_type: string
              value: "2.0"
            method:
              type: const
              description: Json-RPC method name
              const_type: string
              value: "campaign_delete"
            id:
              type: integer
            params:
              type: array
              items:
                type: reference
                reference: CampaignObject
        response_body:
            type: object
            properties:
              jsonrpc:
                type: const
                description: Json-RPC version
                const_type: string
                value: "2.0"
              id:
                type: integer
              result:
                type: const
                const_type: string
                value: "True"
        response_codes:
          - code: 200
            description: All OK.
      impression_add:
        label: impression_add
        method: POST
        uri: /
        description: Update AdSelect DB with campaign and banner information.
        request_body:
          type: object
          properties:
            jsonrpc:
              type: const
              description: Json-RPC version
              const_type: string
              value: "2.0"
            method:
              type: const
              description: Json-RPC method name
              const_type: string
              value: "impression_add"
            id:
              type: integer
            params:
              type: array
              items:
                type: reference
                reference: ImpressionObject
        response_body:
            type: object
            properties:
              jsonrpc:
                type: const
                description: Json-RPC version
                const_type: string
                value: "2.0"
              id:
                type: integer
              result:
                type: const
                const_type: string
                value: "True"
        response_codes:
          - code: 200
            description: All OK.
      banner_select:
        label: banner_select
        method: POST
        uri: /
        description: Update AdSelect DB with campaign and banner information.
        request_body:
          type: object
          properties:
            jsonrpc:
              type: const
              description: Json-RPC version
              const_type: string
              value: "2.0"
            method:
              type: const
              description: Json-RPC method name
              const_type: string
              value: "banner_select"
            id:
              type: integer
            params:
              type: array
              items:
                type: reference
                reference: SelectBannerRequest
        response_body:
          type: object
          properties:
            jsonrpc:
              type: const
              description: Json-RPC version
              const_type: string
              value: "2.0"
            id:
              type: integer
            result:
              type: array
              items:
                type: reference
                reference: SelectBannerResponse
    references:
      BannerObject:
        properties:
          banner_id:
            type: string
            sample: mnqwe
          banner_size:
            type: string
            sample: 966x1410
          campaign_id:
            type: string
            sample: casuh12
          keywords:
            type: object
            additionalProperties:
              type: string
        type: object
      CampaignObject:
        properties:
          banners:
            items:
              reference: BannerObject
              type: reference
            type: array
          campaign_id:
            type: string
          filters:
            reference: RequireExcludeListObject
            type: reference
          keywords:
            type: object
          time_end:
            type: integer
            sample: 231187302
          time_start:
            type: integer
            sample: 131187302
        type: object
      ImpressionObject:
        properties:
          banner_id:
            type: string
            sample: dsha73
          keywords:
            type: object
          paid_amount:
            type: number
            sample: 0.321312321
          publisher_id:
            type: string
            sample: dja8h3
          user_id:
            type: string
            sample: da3w9jv
        type: object
      KeywordFilterObject:
        type: object
        properties:
          filter:
            type: object
            properties:
              args:
                type: string
                sample: 18-30
                description: Value of keyword
              type:
                type: enum
                values:
                  - "="
                  - "and"
                  - "or"
                  - ">="
                  - "<="
                  - ">"
                  - "<"
                sample: "="
          keyword:
            type: string
            description: Keyword key/name
            sample: age_bracket
      RequireExcludeListObject:
        properties:
          exclude:
            items:
              reference: KeywordFilterObject
              type: reference
            type: array
          require:
            items:
              reference: KeywordFilterObject
              type: reference
            type: array
        type: object
      SelectBannerRequest:
        properties:
          banner_filters:
            reference: RequireExcludeListObject
            type: reference
          banner_size:
            type: string
            sample: 966x1410
          keywords:
            type: object
          publisher_id:
            type: integer
            sample: 231
          request_id:
            type: integer
            sample: 290
          user_id:
            type: string
            sample: fhs893
        type: object
      SelectBannerResponse:
        properties:
          banner_id:
            type: string
            sample: h7sfd0ag
          request_id:
            type: integer
            sample: 505
        type: object